<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tzauto.dao.MainMapping">
    <insert id="add">
      insert  into relations (recipe_name,material_number,fixtureno) value (#{recipeName}, #{materialNumber},#{fixtureno})
    </insert>
    <update id="update">
        update relations set  recipe_name = #{recipeName} , material_number = #{materialNumber},fixtureno=#{fixtureno} where id = #{id}
    </update>
    <delete id="delete">
        delete from relations where id = #{id}
    </delete>

    <select id="getAll" resultType="com.tzauto.entity.RelationEntity">

    select * from  relations order by material_number

    </select>
    <select id="query" resultType="com.tzauto.entity.RelationEntity">
        select * from  relations where
         fixtureno = #{fixtureno} and
          material_number = #{materialNumber}

    </select>
    <select id="queryUser" resultType="java.lang.String">
 select login_name from  sys_user where login_name=#{name} and
 password = #{passWord}

    </select>

    <select id="queryLot" resultType="com.tzauto.entity.LotInfo">
            select
            lotid, starttime, lotnum, complete ,firstnum
              ,TARGET_NUM targetNum
     ,PAPER_NO paperNo
     ,LAYER
     ,MAIN_SERIAL mainSerial
     ,PART_NUM partNum
     ,WORK_NO workNo
     ,LAYER_NAME layerName
     ,SERIAL
     ,IS_MAIN isMain
     ,ORDER_ID orderId
     ,RECIPE_NAME recipeName
     ,OP_ID opId
     ,item2 item2
     ,item4 item4
     ,item5 item5
     ,item6 item6
             from lotinfo where lotid = #{lot};
    </select>
    <insert id="lotInfoBak">
    insert into lotinfobak (select * from lotinfo where lotid = #{lot})
  </insert>
    <update id="addData">
        update lotinfo set item2 = #{item2},item4=#{item4},item5=#{item5},item6=#{item6},IS_MAIN=#{isMain} where lotid = #{lot}
    </update>
    <delete id="deleteLot">
        delete from  lotinfo where lotid = #{lot}
  </delete>
</mapper>
